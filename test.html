
<!doctype html>
<html>
    <head>
        
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="dist/jquery.cloudsearch.js"></script>
        <script src="dist/jquery.cloudsearch.suggester.js"></script>
        <!-- <script src="dist/jquery-ui.min.js"></script>
        <link rel="stylesheet" href="dist/jquery-ui.min.css" /> -->

    </head>
    <body>
        <h1>Hello World</h1>

        <div class="input-wrapper">
            <input type="text" id="searchInput" value="" placeholder="Start typing" />
        </div>

        <table>
            <tbody>
                <tr>
                    <td style="vertical-align: top;">
                        <div id="tps-aws-facet-list" style="outline: 1px solid red;"></div>
                    </td>
                    <td>
                        <div id="tps-aws-active-facets"></div>
                        <div id="tps-aws-results"></div>
                        <div id="tps-aws-results-pager"></div>
                    </td>                    
                </tr>
            </tbody>
        </table>

        

        <script>

            var SearchOptions = {
                cloudSearch: {
                    url: 'https://1gcvo6mof9.execute-api.us-east-1.amazonaws.com/rcm-site-search-beta',
                    // key: 'Hh4O1adBCAardxSjFyPK471wauiRZnvyJ5USNbkh'
                },
                searchParams: {
                    q: "matchall",
                    return: "_all_fields",
                    size: 20, // page size
                    sort: "_score desc",
                    start: 0, // offset starting result (pagination)
                    "q.parser" : "structured",
                    "q.options" : "{ fields: ['documentname^5','description^2', 'menuitemsummary^2', 'content'] }",                    
                    //"facet.classname" : "{}",
                    //"facet.bioartistgenres" : "{}",
                    // fq: "(or classname:  'CMS.MenuItem' classname: 'TPSDT.NewsArticle' classname: 'TPSDT.Event' classname: 'TPSDT.Bio' )"
                    fq: "classname: 'TPSDT.Bio'"
                    // fq: "(or field=classname 'TPSDT.Card')"

                },
                results: {
                    container: '#tps-aws-results',                    
                    pager: {
                        renderPager: true,
                        container: '#tps-aws-results-pager',
                        loadMore: false,
                        pagerRangeIncrement: 5,
                    },
                },
                urlParameters: {
                    // address: 'a',
                    // latitude: 'l',
                    // longitude: 'ln',
                    // latlong: null,
                    // search: ''
                },
                facets: {
                    displayFacets: [ 'classname', 'bioartistgenres', 'biotypes' ],
                    container: "#tps-aws-facet-list"
                },
                facetsApplied: {
                    container: '#tps-aws-active-facets',
                },
                facetsDictionary: { 
                    "classname" : "Page Type",
                    "bioartistgenres" : "Bio Artist Genre(s)",
                    "biotypes"  : "Bio Types"
                },
                onLoad: function(a,b) {
                    // console.log('results');
                    // console.log(this);
                    // console.log(a);                    
                },
                debug: true
            }         

            var suggesterOptions = {
                cloudSuggester : {
                    url: 'https://u1htsx5gpg.execute-api.us-east-1.amazonaws.com/rcm-site-search-suggester-beta',

                },
                searchParams: {
                    suggester: 'rcmusic_suggester'
                },

            }

            $(document).ready(function(){                
                $('#tps-aws-results').cloudsearch(SearchOptions);

                /*
                $( '#searchInput' ).autocomplete({
                    source: function(inputText, setSource) {
                        suggesterOptions.searchParams.q = inputText.term;
                        suggesterOptions.onLoad = function(a) {                            
                            var suggArr = [];
                            $.each(this.suggest.suggestions, function(k,v){
                                suggArr.push(v.suggestion)
                            });
                            setSource(suggArr);
                        }
                        var suggestionObj = $(document).cloudsearchSuggester(suggesterOptions);
                    }
                });
                */

            });

            tps_format_test = function(value, resultsObject) {
                // console.log(value);
                // console.log(resultsObject);
                return value;
            } 
        </script>
    </body>
</html>


<!-- 

     var ls = {
       
        
        results: {
            container: '#results',
            template: null,
            onCreate: function () { },
            alwaysClearContainer: false
        },
        
        
    };


 -->